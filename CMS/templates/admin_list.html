<!doctype html>
{% load staticfiles %}
<html> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{% block title %}
        模板
    {% endblock %}</title>
    <meta name="description" content="CMS">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="../apple-icon.png">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">

    <link rel="stylesheet" href="{% static 'assets/css/normalize.css' %}">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'assets/css/themify-icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/flag-icon.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/cs-skin-elastic.css' %}">
    <link rel="stylesheet" href="{% static 'assets/scss/style.css' %}">
    <link href="{% static 'assets/css/lib/vector-map/jqvmap.min.css' %}" rel="stylesheet">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->

</head>
<body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
<script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>

<!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
<script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

<script src="{% static 'assets/js/plugins.js' %}"></script>
<script src="{% static 'assets/js/main.js' %}"></script>

<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->


<!-- Left Panel -->

<!-- Right Panel -->


<div class="card-body">
    <div>
        <table id="bootstrap-data-table" class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>机构id</th>
                <th>机构名称</th>
                <th>工商号</th>
                <th>法人姓名</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>

            {% for institution in institutions %}
                <tr>

                    <td>{{ institution.id }}</td>
                    <td>{{ institution.name }}</td>
                    <td> {{ institution.corporate_id }}</td>
                    <td>{{ institution.legal_person }}</td>
                    <td>{% if institution.status == '1' %}审核通过{% endif %}{% if institution.status == '0' %}
                        审核待定{% endif %}</td>
                    <td width="80px">
                        <a href="javascript:void(0);"  onclick="pass({{ institution.id }});"><i class="fa fa-check"></i></a>

                        <a href="javascript:void(0);" onclick="reject({{ institution.id }})"><i class="fa fa-trash"></i></a>
                    </td>

                </tr>
            {% endfor %}


            </tbody>
        </table>
    </div>
    <nav aria-label="...">
        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item active">
                <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
            </li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        </ul>
    </nav>
</div>

<script type="text/javascript">


    function pass(id) {

        var data = {
            "flag" : "1",
            "id" : id,
        }
        jQuery(function ($){
            $.ajax({
                url: '/myadmin/checkInstitution/',
                type: 'POST',
                data: data,
                dataType: 'json',
                success: function (response) {
                    if(response["info"] != null){
                        alert(response["info"])
                        location.reload(true)
                    }
                }


            });
        });
    }

     function reject(id) {

        var data = {
            "flag" : "0",
            "id" : id,
        }
        jQuery(function ($){
            $.ajax({
                url: '/myadmin/checkInstitution/',
                type: 'POST',
                data: data,
                dataType: 'json',
                success: function (response) {
                    if(response["info"] != null){
                        alert(response["info"])
                        location.reload(true)
                    }
                }
            });
        });
    }



    {#function reject() {#}
    {#    var data = {#}
    {#        "flag": "0",#}
    {#        "id : {{ institution.id }}#}
    {#    }#}
    {#    jQuery(function ($) {#}
    {#        $.ajax({#}
    {#            url: '/myadmin/checkInstitution/',#}
    {#            type: 'POST',#}
    {#            data: data,#}
    {#            dataType: 'json',#}
    {#            success: function (response) {#}
    {#                if (response['errorInfo'] != null) {#}
    {##}
    {#                } else {#}
    {##}
    {#                }#}
    {#            }#}
    {#        });#}
    {#    });#}
    {##}
    {#}#}
</script>
<!-- /#right-panel -->

<!-- Right Panel -->


</body>

</html>
